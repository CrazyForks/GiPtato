(()=>{"use strict";var e={63801:(e,t,r)=>{r(23792),r(3362),r(69085),r(9391);var n=r(22856),s=r(74927),a=r.n(s),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},c=[];const i={name:"App"},u=i;var l=r(81656),d=(0,l.A)(u,o,c,!1,null,null,null);const p=d.exports;var v=r(1594),m=(r(44114),function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"dashboard"},[t("el-card",{staticClass:"welcome-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("h2",[e._v("欢迎使用iPtato防火墙管理面板")])]),t("div",{staticClass:"dashboard-content"},[t("p",[e._v("通过这个面板，您可以轻松管理多台服务器的iptables防火墙规则。")]),t("ul",[t("li",[e._v("封禁/解封BT、PT协议")]),t("li",[e._v("封禁/解封垃圾邮件端口")]),t("li",[e._v("自定义封禁/解封端口和关键词")]),t("li",[e._v("管理入网端口白名单")]),t("li",[e._v("管理入网IP白名单")])]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/servers")}}},[e._v("开始管理服务器")])],1)])],1)])}),g=[];const f={name:"HomeView"},h=f;var b=(0,l.A)(h,m,g,!1,null,"6336ce98",null);const w=b.exports;var k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"servers-container"},[t("div",{staticClass:"page-header"},[t("h1",[e._v("服务器管理")]),t("el-button",{attrs:{type:"primary"},on:{click:e.showAddServerDialog}},[e._v("添加服务器")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.servers,border:""}},[t("el-table-column",{attrs:{prop:"name",label:"服务器名称",width:"180"}}),t("el-table-column",{attrs:{prop:"host",label:"主机地址",width:"180"}}),t("el-table-column",{attrs:{prop:"port",label:"SSH端口",width:"100"}}),t("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120"}}),t("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{type:"online"===r.row.status?"success":"error"===r.row.status?"danger":"info"}},[e._v(" "+e._s(e.statusText[r.row.status])+" ")])]}}])}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleEdit(r.row)}}},[e._v("编辑")]),"online"!==r.row.status?t("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleConnect(r.row)}}},[e._v("连接")]):t("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleDisconnect(r.row)}}},[e._v("断开")]),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.handleManageRules(r.row)}}},[e._v("管理规则")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(r.row)}}},[e._v("删除")])]}}])})],1),t("el-dialog",{attrs:{title:e.isEdit?"编辑服务器":"添加服务器",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("server-form",{attrs:{"is-edit":e.isEdit,"server-data":e.currentServer},on:{submit:e.handleFormSubmit}})],1)],1)},x=[],A=r(47546),I=r(24634),S=r(8643),y=(r(62010),function(){var e=this,t=e._self._c;return t("div",{staticClass:"server-form"},[t("el-form",{ref:"serverForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"服务器名称",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入服务器名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"主机地址",prop:"host"}},[t("el-input",{attrs:{placeholder:"请输入主机IP或域名"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),t("el-form-item",{attrs:{label:"SSH端口",prop:"port"}},[t("el-input-number",{attrs:{min:1,max:65535,step:1},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"认证方式",prop:"authType"}},[t("el-radio-group",{model:{value:e.form.authType,callback:function(t){e.$set(e.form,"authType",t)},expression:"form.authType"}},[t("el-radio",{attrs:{label:"password"}},[e._v("密码")]),t("el-radio",{attrs:{label:"privateKey"}},[e._v("密钥")])],1)],1),"password"===e.form.authType?t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1):e._e(),"privateKey"===e.form.authType?t("el-form-item",{attrs:{label:"私钥",prop:"privateKey"}},[t("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入私钥内容"},model:{value:e.form.privateKey,callback:function(t){e.$set(e.form,"privateKey",t)},expression:"form.privateKey"}})],1):e._e(),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v(e._s(e.isEdit?"更新":"添加"))]),t("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)}),P=[];const $={name:"ServerForm",props:{isEdit:{type:Boolean,default:!1},serverData:{type:Object,default:function(){return{}}}},data:function(){return{form:{name:"",host:"",port:22,username:"",authType:"password",password:"",privateKey:""},rules:{name:[{required:!0,message:"请输入服务器名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],host:[{required:!0,message:"请输入主机地址",trigger:"blur"}],port:[{required:!0,message:"请输入SSH端口",trigger:"blur"},{type:"number",message:"端口必须为数字值",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],privateKey:[{required:!0,message:"请输入私钥",trigger:"blur"}]}}},created:function(){this.isEdit&&this.serverData&&(this.form=(0,S.A)((0,S.A)({},this.form),this.serverData))},methods:{submitForm:function(){var e=this;this.$refs.serverForm.validate((function(t){if(!t)return!1;e.$emit("submit",e.form)}))},resetForm:function(){this.$refs.serverForm.resetFields()}}},_=$;var O=(0,l.A)(_,y,P,!1,null,"65912c88",null);const L=O.exports;var T=r(1910);const E={name:"ServersView",components:{ServerForm:L},data:function(){return{loading:!1,servers:[],dialogVisible:!1,isEdit:!1,currentServer:null,statusText:{online:"在线",offline:"离线",error:"错误"}}},created:function(){this.fetchServers()},methods:(0,S.A)((0,S.A)({},(0,T.i0)("servers",["getAllServers","createServer","updateServer","deleteServer","connectServer","disconnectServer"])),{},{fetchServers:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.getAllServers();case 4:r=t.sent,e.servers=r.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message.error("获取服务器列表失败: "+t.t0.message);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})))()},showAddServerDialog:function(){this.isEdit=!1,this.currentServer=null,this.dialogVisible=!0},handleEdit:function(e){this.isEdit=!0,this.currentServer=(0,S.A)({},e),this.dialogVisible=!0},handleFormSubmit:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!t.isEdit){r.next=7;break}return r.next=4,t.updateServer({id:t.currentServer._id,data:e});case 4:t.$message.success("服务器更新成功"),r.next=10;break;case 7:return r.next=9,t.createServer(e);case 9:t.$message.success("服务器添加成功");case 10:t.dialogVisible=!1,t.fetchServers(),r.next=17;break;case 14:r.prev=14,r.t0=r["catch"](0),t.$message.error(r.t0.message);case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()},handleDelete:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$confirm("此操作将永久删除该服务器, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:return r.next=5,t.deleteServer(e._id);case 5:t.$message.success("服务器删除成功"),t.fetchServers(),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),"cancel"!==r.t0&&t.$message.error("删除服务器失败: "+r.t0.message);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},handleConnect:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.loading=!0,r.next=4,t.connectServer(e._id);case 4:t.$message.success("服务器连接成功"),t.fetchServers(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$message.error("连接服务器失败: "+r.t0.message);case 11:return r.prev=11,t.loading=!1,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[0,8,11,14]])})))()},handleDisconnect:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,t.loading=!0,r.next=4,t.disconnectServer(e._id);case 4:t.$message.success("服务器断开连接成功"),t.fetchServers(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),t.$message.error("断开服务器连接失败: "+r.t0.message);case 11:return r.prev=11,t.loading=!1,r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[0,8,11,14]])})))()},handleManageRules:function(e){this.$router.push({name:"rules",params:{serverId:e._id}})}})},C=E;var D=(0,l.A)(C,k,x,!1,null,"5a3153f8",null);const B=D.exports;r(74423),r(21699);var V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rules-container"},[t("div",{staticClass:"page-header"},[t("h1",[e._v("防火墙规则管理")]),t("div",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/servers")}}},[e._v("返回服务器列表")]),t("el-button",{attrs:{type:"success",loading:e.deploying,disabled:!e.isServerOnline},on:{click:e.deployIptatoScript}},[e._v("部署脚本")]),t("el-button",{attrs:{type:"danger",disabled:!e.isServerOnline},on:{click:e.confirmClearRules}},[e._v("清空所有规则")])],1)]),e.server?t("div",{staticClass:"server-info"},[t("h2",[e._v(e._s(e.server.name)+" "),t("el-tag",{attrs:{type:"online"===e.server.status?"success":"danger"}},[e._v(e._s("online"===e.server.status?"在线":"离线"))])],1),t("p",[e._v(e._s(e.server.host)+":"+e._s(e.server.port)+" ("+e._s(e.server.username)+")")])]):e._e(),t("el-tabs",{attrs:{type:"card"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"出网控制",name:"outbound"}},[e.isServerOnline?e._e():t("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"服务器当前处于离线状态",type:"warning",description:"服务器离线时无法管理防火墙规则，请先连接服务器","show-icon":"",closable:!1}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.isServerOnline,expression:"!isServerOnline"}]},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("当前封禁列表")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",disabled:!e.isServerOnline},on:{click:e.refreshBlockList}},[e._v("刷新")])],1),e.blockList?t("pre",{staticClass:"output"},[e._v(e._s(e.blockList))]):t("div",[e._v("加载中...")])]),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("封禁管理")])]),t("el-button-group",[t("el-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.blockBTPT}},[e._v("封禁BT/PT")]),t("el-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.blockSPAM}},[e._v("封禁SPAM")]),t("el-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.blockAll}},[e._v("封禁全部")])],1),t("el-divider"),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.blockCustomPorts.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"自定义端口"}},[t("el-input",{attrs:{placeholder:"如: 6881,6882-6889",disabled:!e.isServerOnline},model:{value:e.customPorts,callback:function(t){e.customPorts=t},expression:"customPorts"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"warning",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.blockCustomPorts}},[e._v("封禁")])],1)],1),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.blockCustomKeyword.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"自定义关键词"}},[t("el-input",{attrs:{placeholder:"如: youtube.com",disabled:!e.isServerOnline},model:{value:e.customKeyword,callback:function(t){e.customKeyword=t},expression:"customKeyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"warning",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.blockCustomKeyword}},[e._v("封禁")])],1)],1)],1),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("解封管理")])]),t("el-button-group",[t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockBTPT}},[e._v("解封BT/PT")]),t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockSPAM}},[e._v("解封SPAM")]),t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockAll}},[e._v("解封全部")])],1),t("el-divider"),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.unblockCustomPorts.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"自定义端口"}},[t("el-input",{attrs:{placeholder:"如: 6881,6882-6889",disabled:!e.isServerOnline},model:{value:e.customUnblockPorts,callback:function(t){e.customUnblockPorts=t},expression:"customUnblockPorts"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockCustomPorts}},[e._v("解封")])],1)],1),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.unblockCustomKeyword.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"自定义关键词"}},[t("el-input",{attrs:{placeholder:"如: youtube.com",disabled:!e.isServerOnline},model:{value:e.customUnblockKeyword,callback:function(t){e.customUnblockKeyword=t},expression:"customUnblockKeyword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockCustomKeyword}},[e._v("解封")])],1)],1),t("el-button",{attrs:{type:"success",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.unblockAllKeywords}},[e._v("解封所有关键词")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"入网控制",name:"inbound"}},[e.isServerOnline?e._e():t("el-alert",{staticStyle:{"margin-bottom":"15px"},attrs:{title:"服务器当前处于离线状态",type:"warning",description:"服务器离线时无法管理防火墙规则，请先连接服务器","show-icon":"",closable:!1}}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.isServerOnline,expression:"!isServerOnline"}]},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("SSH端口状态")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",disabled:!e.isServerOnline},on:{click:e.refreshSSHPort}},[e._v("刷新")])],1),e.sshPortStatus?t("pre",{staticClass:"output"},[e._v(e._s(e.sshPortStatus))]):t("div",[e._v("加载中...")])]),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("入网端口管理")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",disabled:!e.isServerOnline},on:{click:e.refreshInboundPorts}},[e._v("刷新")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPorts,expression:"loadingPorts"}],staticStyle:{width:"100%"},attrs:{data:e.inboundPorts}},[t("el-table-column",{attrs:{prop:"port",label:"端口",width:"180"}}),t("el-table-column",{attrs:{prop:"protocol",label:"协议",width:"100"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[e.isSshPort(r.row.port)?t("el-tooltip",{attrs:{content:"不能取消SSH端口放行，这可能导致无法连接服务器",placement:"top"}},[t("el-button",{attrs:{type:"danger",size:"mini",disabled:""}},[e._v("取消放行")])],1):t("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.isServerOnline},on:{click:function(t){return e.disallowPort(r.row.port)}}},[e._v("取消放行")])]}}])})],1),t("el-divider"),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.allowPort.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"放行端口"}},[t("el-input",{attrs:{placeholder:"如: 80,443",disabled:!e.isServerOnline},model:{value:e.portToAllow,callback:function(t){e.portToAllow=t},expression:"portToAllow"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.allowPort}},[e._v("添加")])],1)],1)],1),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("入网IP管理")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",disabled:!e.isServerOnline},on:{click:e.refreshInboundIPs}},[e._v("刷新")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingIPs,expression:"loadingIPs"}],staticStyle:{width:"100%"},attrs:{data:e.inboundIPs}},[t("el-table-column",{attrs:{prop:"ip",label:"IP地址",width:"180"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.isServerOnline},on:{click:function(t){return e.disallowIP(r.row.ip||r.row)}}},[e._v("取消放行")])]}}])})],1),t("el-divider"),t("el-form",{attrs:{inline:!0},nativeOn:{submit:function(t){return t.preventDefault(),e.allowIP.apply(null,arguments)}}},[t("el-form-item",{attrs:{label:"放行IP"}},[t("el-input",{attrs:{placeholder:"如: 192.168.1.1",disabled:!e.isServerOnline},model:{value:e.ipToAllow,callback:function(t){e.ipToAllow=t},expression:"ipToAllow"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading,disabled:!e.isServerOnline},on:{click:e.allowIP}},[e._v("添加")])],1)],1)],1)],1)],1)],1),e.commandOutput?t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("命令输出")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.clearCommandOutput}},[e._v("清空")])],1),t("pre",{class:["output",{"output-error":e.commandOutput.includes("失败")||e.commandOutput.includes("错误")}]},[e._v(e._s(e.commandOutput))]),e.commandOutput.includes("status code 500")?t("div",{staticClass:"error-solution"},[t("el-alert",{attrs:{title:"发现服务器内部错误(500)",type:"error",description:"服务器内部错误可能由多种原因导致，建议尝试以下解决方案：","show-icon":"",closable:!1}}),t("el-collapse",{staticStyle:{"margin-top":"10px"}},[t("el-collapse-item",{attrs:{title:"可能的解决方案",name:"1"}},[t("ol",[t("li",[e._v("检查服务器连接状态，确保SSH可以正常连接")]),t("li",[e._v("尝试手动部署脚本按钮，绕过自动部署流程")]),t("li",[e._v("检查服务器磁盘空间是否足够")]),t("li",[e._v("查看服务器日志文件 (/var/log/syslog 或 /var/log/messages)")]),t("li",[e._v("尝试在服务器上手动执行以下命令:")]),t("pre",{staticClass:"command-example"},[e._v("wget -N --no-check-certificate https://raw.githubusercontent.com/Fiftonb/GiPtato/refs/heads/main/iPtato.sh && chmod +x iPtato.sh && bash iPtato.sh")]),t("li",[e._v("如仍无法解决，请联系管理员或提交详细错误报告")])])])],1)],1):e._e()]):e._e(),e.isInitialized?e._e():t("el-card",{staticClass:"initialization-card"},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("初始化检查")])]),t("el-steps",{attrs:{active:e.initStepActive,"finish-status":"success"}},e._l(e.initializationSteps,(function(e,r){return t("el-step",{key:r,attrs:{title:e.name}})})),1),t("div",{staticClass:"initialization-actions",staticStyle:{"margin-top":"20px"}},[1===e.initStepActive?t("el-button",{attrs:{type:"primary",loading:e.connecting},on:{click:e.connectServer}},[e._v("连接服务器")]):e._e(),2===e.initStepActive?t("el-button",{attrs:{type:"primary",loading:e.deploying},on:{click:e.checkInitialization}},[e._v("自动部署脚本")]):e._e(),2===e.initStepActive?t("el-button",{attrs:{type:"warning",loading:e.deploying},on:{click:e.deployIptatoManually}},[e._v("手动部署脚本")]):e._e(),3===e.initStepActive?t("el-button",{attrs:{type:"primary"},on:{click:e.completeInitialization}},[e._v("加载规则")]):e._e(),t("el-button",{attrs:{type:"danger",loading:e.loading},on:{click:e.manualInitialize}},[e._v("跳过检查直接初始化")])],1),e.commandOutput&&e.commandOutput.includes("脚本部署失败")?t("div",{staticClass:"error-info",staticStyle:{"margin-top":"15px",color:"#F56C6C"}},[t("p",[e._v("部署失败原因可能包括：")]),t("ul",[t("li",[e._v("服务器连接不稳定")]),t("li",[e._v("服务器配置问题")]),t("li",[e._v("网络限制阻止了脚本下载")])]),t("p",[e._v("建议尝试：")]),t("ul",[t("li",[e._v('点击"手动部署脚本"按钮')]),t("li",[e._v("检查服务器连接状态")]),t("li",[e._v("查看服务器日志获取详细信息")])])]):e._e()],1),t("el-card",{staticStyle:{"margin-top":"20px"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[e._v("调试工具")]),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.debugInfo=""}}},[e._v("清空")])],1),t("el-button",{attrs:{type:"warning",loading:e.debugging},on:{click:e.checkScriptExistence}},[e._v("检查脚本存在")]),t("el-button",{attrs:{type:"warning",loading:e.debugging},on:{click:e.testServerConnection}},[e._v("测试服务器连接")]),t("el-button",{attrs:{type:"danger",loading:e.debugging},on:{click:e.resetConnectionState}},[e._v("重置连接状态")]),t("el-button",{attrs:{type:"primary",loading:e.debugging},on:{click:e.generateManualCommands}},[e._v("生成手动执行命令")]),e.debugInfo?t("div",{staticClass:"debug-info",staticStyle:{"margin-top":"15px"}},[t("h4",[e._v("调试信息：")]),t("pre",[e._v(e._s(e.debugInfo))])]):e._e()],1)],1)},K=[],z=r(45929),H=r(96922);r(16280),r(76918),r(28706),r(51629),r(64346),r(62062),r(60739),r(23288),r(18111),r(7588),r(61701),r(33110),r(26099),r(58940),r(27495),r(38781),r(31415),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(47764),r(71761),r(23500),r(62953),r(76031);const M={name:"RulesView",props:{serverId:{type:String,required:!0}},data:function(){return{activeTab:"outbound",loading:!1,deploying:!1,connecting:!1,loadingPorts:!1,loadingIPs:!1,server:null,blockList:"",sshPortStatus:"",sshPort:null,inboundPorts:[],inboundIPs:[],commandOutput:"",customPorts:"",customKeyword:"",customUnblockPorts:"",customUnblockKeyword:"",portToAllow:"",ipToAllow:"",isInitialized:!1,initStepActive:0,initializationSteps:[{name:"检查状态",done:!1},{name:"连接服务器",done:!1},{name:"部署脚本",done:!1},{name:"加载规则",done:!1}],debugging:!1,debugInfo:"",statusCheckTimer:null}},computed:(0,S.A)((0,S.A)({},(0,T.L8)("servers",["getLoading"])),{},{hasValidServerId:function(){return!!this.serverId&&"undefined"!==this.serverId},isServerOnline:function(){return this.server&&"online"===this.server.status}}),beforeRouteEnter:function(e,t,r){e.params.serverId?r():r((function(e){e.$message.error("未指定服务器ID，请先选择服务器"),e.$router.push("/servers")}))},created:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.activeTab="outbound",!e.hasValidServerId){t.next=7;break}return t.next=4,e.checkInitialization();case 4:e.startServerStatusCheck(),t.next=9;break;case 7:e.commandOutput="服务器ID无效，请返回服务器列表重新选择服务器",e.$message.error("服务器ID无效");case 9:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.stopServerStatusCheck()},methods:(0,S.A)((0,S.A)((0,S.A)({},(0,T.i0)("servers",["getServer","deployIptato","connectServer"])),(0,T.i0)("rules",["getBlockList","blockBTPTAction","blockSPAMAction","blockAllAction","blockCustomPortsAction","blockCustomKeywordAction","unblockBTPTAction","unblockSPAMAction","unblockAllAction","unblockCustomPortsAction","unblockCustomKeywordAction","unblockAllKeywordsAction","getInboundPorts","getInboundIPs","allowInboundPortsAction","disallowInboundPortsAction","allowInboundIPsAction","disallowInboundIPsAction","getSSHPort","clearAllRulesAction"])),{},{checkInitialization:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n,s,a;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.hasValidServerId){t.next=5;break}return e.commandOutput="错误：未指定服务器ID，请返回服务器列表选择服务器",e.$message.error("未指定服务器ID"),t.abrupt("return",!1);case 5:return e.resetInitSteps(),e.isInitialized=!1,e.initStepActive=0,e.loading=!0,t.next=11,e.getServer(e.serverId);case 11:if(r=t.sent,r&&r.success){t.next=14;break}throw new Error((null===r||void 0===r?void 0:r.error)||"获取服务器信息失败");case 14:if(e.server=r.data,e.initializationSteps[0].done=!0,e.initStepActive=1,e.server.status&&"connected"===e.server.status){t.next=27;break}return e.commandOutput="正在连接服务器...",e.connecting=!0,t.next=22,e.connectServer(e.serverId);case 22:if(n=t.sent,e.connecting=!1,n&&n.success){t.next=26;break}throw new Error((null===n||void 0===n?void 0:n.error)||"连接服务器失败");case 26:e.commandOutput+="\n服务器连接成功";case 27:return e.initializationSteps[1].done=!0,e.initStepActive=2,e.commandOutput+="\n检查iptato脚本部署情况...",e.deploying=!0,t.prev=31,t.next=34,e.deployIptato(e.serverId);case 34:if(s=t.sent,e.deploying=!1,s&&s.success){t.next=42;break}throw a=(null===s||void 0===s?void 0:s.error)||"脚本部署失败",e.commandOutput+="\n脚本部署失败: ".concat(a),(a.includes("500")||a.includes("内部错误"))&&(e.commandOutput+="\n服务器内部错误，可能原因：",e.commandOutput+="\n1. 服务器磁盘空间不足",e.commandOutput+="\n2. 服务器防火墙限制了文件上传",e.commandOutput+="\n3. 服务器缺少必要的依赖包",e.commandOutput+="\n\n建议操作：",e.commandOutput+="\n- 检查服务器连接状态",e.commandOutput+="\n- 查看服务器日志获取详细错误信息",e.commandOutput+="\n- 尝试手动连接服务器并安装依赖"),e.$message.error("脚本部署失败: ".concat(a)),new Error(a);case 42:e.commandOutput+="\n脚本部署成功",e.initializationSteps[2].done=!0,e.initStepActive=3,t.next=52;break;case 47:throw t.prev=47,t.t0=t["catch"](31),e.deploying=!1,e.commandOutput+="\n脚本部署过程中出错: ".concat(t.t0.message),t.t0;case 52:return t.next=54,e.refreshBlockList();case 54:return t.next=56,e.refreshSSHPort();case 56:return t.next=58,e.refreshInboundPorts();case 58:return t.next=60,e.refreshInboundIPs();case 60:return e.initializationSteps[3].done=!0,e.isInitialized=!0,e.loading=!1,t.abrupt("return",!0);case 66:return t.prev=66,t.t1=t["catch"](0),e.loading=!1,e.deploying=!1,e.connecting=!1,e.commandOutput+="\n初始化失败: ".concat(t.t1.message),e.$message.error("初始化失败: ".concat(t.t1.message)),t.abrupt("return",!1);case 74:case"end":return t.stop()}}),t,null,[[0,66],[31,47]])})))()},resetInitSteps:function(){this.initializationSteps.forEach((function(e){return e.done=!1}))},refreshBlockList:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法获取阻止列表"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.getBlockList(e.serverId);case 7:r=t.sent,r&&r.success?e.blockList=r.data||"无阻止列表数据":(e.$message.warning((null===r||void 0===r?void 0:r.error)||"获取阻止列表失败"),e.blockList="获取阻止列表失败"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$message.error("获取阻止列表错误: ".concat(t.t0.message)),e.blockList="获取失败: ".concat(t.t0.message);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},refreshSSHPort:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n,s;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法获取SSH端口"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.getSSHPort(e.serverId);case 7:if(r=t.sent,r&&r.success){e.sshPortStatus=r.data||"无SSH端口数据";try{n=r.data,n&&"string"===typeof n&&(s=n.match(/SSH端口\s*[:：]\s*(\d+)/i)||n.match(/端口\s*[:：]\s*(\d+)/i)||n.match(/port\s*[:：]\s*(\d+)/i),s&&s[1]&&(e.sshPort=parseInt(s[1],10),console.log("已识别SSH端口: ".concat(e.sshPort))))}catch(a){console.error("解析SSH端口数据出错:",a),e.server&&e.server.port&&(e.sshPort=e.server.port,console.log("使用服务器配置的端口: ".concat(e.sshPort)))}}else e.$message.warning((null===r||void 0===r?void 0:r.error)||"获取SSH端口失败"),e.sshPortStatus="获取SSH端口失败";t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$message.error("获取SSH端口错误: ".concat(t.t0.message)),e.sshPortStatus="获取失败: ".concat(t.t0.message);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},refreshInboundPorts:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n,s,a;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法获取入网端口"),t.abrupt("return");case 3:return t.prev=3,e.loadingPorts=!0,t.next=7,e.getInboundPorts(e.serverId);case 7:r=t.sent,r&&r.success?(n=r.data||{tcp:[],udp:[]},s=(0,H.A)(new Set([].concat((0,H.A)(n.tcp||[]),(0,H.A)(n.udp||[])))),a=s.map((function(e){return{port:e,protocol:"TCP|UDP"}})),console.log("处理后的端口数据:",a),e.inboundPorts=a,0===a.length?e.commandOutput="当前无放行端口":e.commandOutput="成功获取端口列表，共 ".concat(a.length," 个端口")):(e.$message.warning((null===r||void 0===r?void 0:r.error)||"获取入网端口失败"),e.inboundPorts=[],e.commandOutput="获取入网端口失败: ".concat((null===r||void 0===r?void 0:r.error)||"未知错误")),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](3),e.$message.error("获取入网端口错误: ".concat(t.t0.message)),e.inboundPorts=[],e.commandOutput="获取入网端口错误: ".concat(t.t0.message);case 16:return t.prev=16,e.loadingPorts=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,11,16,19]])})))()},refreshInboundIPs:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法获取入网IP"),t.abrupt("return");case 3:return t.prev=3,e.loadingIPs=!0,t.next=7,e.getInboundIPs(e.serverId);case 7:if(r=t.sent,r&&r.success){t.next=13;break}return r&&r.error&&r.error.includes("连接")?(e.$message.error("服务器连接失败，请检查连接设置"),e.resetInitSteps(),e.isInitialized=!1):r&&r.error&&r.error.includes("脚本")?(e.$message.error("脚本部署失败，请重新初始化"),e.resetInitSteps(),e.isInitialized=!1):e.$message.warning((null===r||void 0===r?void 0:r.error)||"获取入网IP失败"),e.inboundIPs=[],e.commandOutput="获取入网IP失败: ".concat((null===r||void 0===r?void 0:r.error)||"未知错误"),t.abrupt("return");case 13:n=r.data||[],Array.isArray(n)?(e.inboundIPs=n.map((function(e){return{ip:e}})),0===n.length?e.commandOutput="当前无放行IP":e.commandOutput="成功获取IP列表，共 ".concat(n.length," 个IP")):(e.$message.warning("IP数据格式无法识别"),e.inboundIPs=[],e.commandOutput="获取到的IP数据格式无法识别"),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("获取入网IP错误: ".concat(t.t0.message)),e.inboundIPs=[],e.commandOutput="获取入网IP错误: ".concat(t.t0.message);case 22:return t.prev=22,e.loadingIPs=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[3,17,22,25]])})))()},executeTestCommand:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=4;break}return e.commandOutput="错误：未指定服务器ID，无法执行命令",e.$message.error("未指定服务器ID"),t.abrupt("return");case 4:case"end":return t.stop()}}),t)})))()},blockBTPT:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.blockBTPTAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功阻止BT/PT流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"阻止BT/PT失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("阻止BT/PT错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},blockSPAM:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.blockSPAMAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功阻止垃圾邮件流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"阻止垃圾邮件失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("阻止垃圾邮件错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},blockAll:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.blockAllAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功阻止所有流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"阻止所有流量失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("阻止所有流量错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},blockCustomPorts:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行阻止操作"),t.abrupt("return");case 3:if(e.customPorts){t.next=6;break}return e.$message.warning("请输入要阻止的端口"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.blockCustomPortsAction({serverId:e.serverId,ports:e.customPorts});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功阻止端口: ".concat(e.customPorts)),e.customPorts="",t.next=16,e.refreshBlockList();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"阻止自定义端口失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("阻止自定义端口错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},blockCustomKeyword:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行阻止操作"),t.abrupt("return");case 3:if(e.customKeyword){t.next=6;break}return e.$message.warning("请输入要阻止的关键词"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.blockCustomKeywordAction({serverId:e.serverId,keyword:e.customKeyword});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功阻止关键词: ".concat(e.customKeyword)),e.customKeyword="",t.next=16,e.refreshBlockList();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"阻止自定义关键词失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("阻止自定义关键词错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},unblockBTPT:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.unblockBTPTAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功取消阻止BT/PT流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止BT/PT失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("取消阻止BT/PT错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},unblockSPAM:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.unblockSPAMAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功取消阻止垃圾邮件流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止垃圾邮件失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("取消阻止垃圾邮件错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},unblockAll:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.unblockAllAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功取消阻止所有流量"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止所有流量失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("取消阻止所有流量错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},unblockCustomPorts:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:if(e.customUnblockPorts){t.next=6;break}return e.$message.warning("请输入要取消阻止的端口"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.unblockCustomPortsAction({serverId:e.serverId,ports:e.customUnblockPorts});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功取消阻止端口: ".concat(e.customUnblockPorts)),e.customUnblockPorts="",t.next=16,e.refreshBlockList();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止自定义端口失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("取消阻止自定义端口错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},unblockCustomKeyword:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:if(e.customUnblockKeyword){t.next=6;break}return e.$message.warning("请输入要取消阻止的关键词"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.unblockCustomKeywordAction({serverId:e.serverId,keyword:e.customUnblockKeyword});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功取消阻止关键词: ".concat(e.customUnblockKeyword)),e.customUnblockKeyword="",t.next=16,e.refreshBlockList();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止自定义关键词失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("取消阻止自定义关键词错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},unblockAllKeywords:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行取消阻止操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.unblockAllKeywordsAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=14;break}return e.$message.success("成功取消阻止所有关键词"),t.next=12,e.refreshBlockList();case 12:t.next=15;break;case 14:e.$message.error((null===r||void 0===r?void 0:r.error)||"取消阻止所有关键词失败");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](3),e.$message.error("取消阻止所有关键词错误: ".concat(t.t0.message));case 20:return t.prev=20,e.loading=!1,t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[3,17,20,23]])})))()},allowPort:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行允许入网操作"),t.abrupt("return");case 3:if(e.portToAllow){t.next=6;break}return e.$message.warning("请输入要允许的端口"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.allowInboundPortsAction({serverId:e.serverId,ports:e.portToAllow});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功允许入网端口: ".concat(e.portToAllow)),e.portToAllow="",t.next=16,e.refreshInboundPorts();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"允许入网端口失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("允许入网端口错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},disallowPort:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){var n;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.hasValidServerId){r.next=3;break}return t.$message.error("未指定服务器ID，无法执行取消放行操作"),r.abrupt("return");case 3:if(!t.isSshPort(e)){r.next=6;break}return t.$message.error("不能取消SSH端口的放行，这可能导致无法连接服务器"),r.abrupt("return");case 6:return r.prev=6,t.loading=!0,r.next=10,t.disallowInboundPortsAction({serverId:t.serverId,ports:e.toString()});case 10:if(n=r.sent,!n||!n.success){r.next=17;break}return t.$message.success("成功取消放行端口: ".concat(e)),r.next=15,t.refreshInboundPorts();case 15:r.next=18;break;case 17:t.$message.error((null===n||void 0===n?void 0:n.error)||"取消放行端口失败");case 18:r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](6),t.$message.error("取消放行端口错误: ".concat(r.t0.message));case 23:return r.prev=23,t.loading=!1,r.finish(23);case 26:case"end":return r.stop()}}),r,null,[[6,20,23,26]])})))()},allowIP:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行允许入网操作"),t.abrupt("return");case 3:if(e.ipToAllow){t.next=6;break}return e.$message.warning("请输入要允许的IP地址"),t.abrupt("return");case 6:return t.prev=6,e.loading=!0,t.next=10,e.allowInboundIPsAction({serverId:e.serverId,ips:e.ipToAllow});case 10:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功允许入网IP: ".concat(e.ipToAllow)),e.ipToAllow="",t.next=16,e.refreshInboundIPs();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"允许入网IP失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](6),e.$message.error("允许入网IP错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[6,21,24,27]])})))()},disallowIP:function(e){var t=this;return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.hasValidServerId){r.next=3;break}return t.$message.error("未指定服务器ID，无法执行取消放行操作"),r.abrupt("return");case 3:if(n="object"===(0,z.A)(e)?e.ip:e,n){r.next=7;break}return t.$message.error("无效的IP地址"),r.abrupt("return");case 7:return r.prev=7,t.loading=!0,r.next=11,t.disallowInboundIPsAction({serverId:t.serverId,ips:n});case 11:if(s=r.sent,!s||!s.success){r.next=18;break}return t.$message.success("成功取消放行IP: ".concat(n)),r.next=16,t.refreshInboundIPs();case 16:r.next=19;break;case 18:t.$message.error((null===s||void 0===s?void 0:s.error)||"取消放行IP失败");case 19:r.next=24;break;case 21:r.prev=21,r.t0=r["catch"](7),t.$message.error("取消放行IP错误: ".concat(r.t0.message));case 24:return r.prev=24,t.loading=!1,r.finish(24);case 27:case"end":return r.stop()}}),r,null,[[7,21,24,27]])})))()},confirmClearRules:function(){var e=this;this.hasValidServerId?this.$confirm("此操作将清空所有防火墙规则，是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.clearAllRules()}))["catch"]((function(){e.$message({type:"info",message:"已取消清空操作"})})):this.$message.error("未指定服务器ID，无法执行清除规则操作")},clearAllRules:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行清除规则操作"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,t.next=7,e.clearAllRulesAction(e.serverId);case 7:if(r=t.sent,!r||!r.success){t.next=18;break}return e.$message.success("成功清除所有规则"),t.next=12,e.refreshBlockList();case 12:return t.next=14,e.refreshInboundPorts();case 14:return t.next=16,e.refreshInboundIPs();case 16:t.next=19;break;case 18:e.$message.error((null===r||void 0===r?void 0:r.error)||"清除所有规则失败");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](3),e.$message.error("清除所有规则错误: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[3,21,24,27]])})))()},deployIptatoManually:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行部署操作"),t.abrupt("return");case 3:return t.prev=3,e.deploying=!0,e.commandOutput="正在尝试手动部署脚本...\n",t.next=8,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:"wget -N --no-check-certificate https://raw.githubusercontent.com/Fiftonb/GiPtato/refs/heads/main/iPtato.sh && chmod +x iPtato.sh && bash iPtato.sh"});case 8:if(r=t.sent,!r||!r.success){t.next=35;break}return e.commandOutput+="手动部署命令执行成功，正在验证安装结果...\n",t.next=13,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:'test -f /root/iptato.sh && echo "installed" || echo "not found"'});case 13:if(n=t.sent,!(n&&n.success&&n.data&&n.data.stdout&&n.data.stdout.includes("installed"))){t.next=31;break}return e.commandOutput+="脚本已成功安装!\n",e.$message.success("脚本手动部署成功"),e.initializationSteps[2].done=!0,e.initStepActive=3,t.next=21,e.refreshBlockList();case 21:return t.next=23,e.refreshSSHPort();case 23:return t.next=25,e.refreshInboundPorts();case 25:return t.next=27,e.refreshInboundIPs();case 27:e.initializationSteps[3].done=!0,e.isInitialized=!0,t.next=33;break;case 31:e.commandOutput+="脚本安装验证失败，请检查服务器环境或联系管理员\n",e.$message.error("脚本安装验证失败");case 33:t.next=37;break;case 35:e.commandOutput+="手动部署失败: ".concat((null===r||void 0===r?void 0:r.error)||"未知错误","\n"),e.$message.error("手动部署失败");case 37:t.next=43;break;case 39:t.prev=39,t.t0=t["catch"](3),e.commandOutput+="手动部署出错: ".concat(t.t0.message,"\n"),e.$message.error("手动部署出错: ".concat(t.t0.message));case 43:return t.prev=43,e.deploying=!1,t.finish(43);case 46:case"end":return t.stop()}}),t,null,[[3,39,43,46]])})))()},completeInitialization:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法完成初始化"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,e.commandOutput="正在加载规则信息...\n",t.next=8,e.refreshBlockList();case 8:return t.next=10,e.refreshSSHPort();case 10:return t.next=12,e.refreshInboundPorts();case 12:return t.next=14,e.refreshInboundIPs();case 14:e.initializationSteps[3].done=!0,e.isInitialized=!0,e.$message.success("初始化完成"),e.commandOutput+="初始化完成，可以开始管理防火墙规则",t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](3),e.commandOutput+="\n初始化过程中加载规则出错: ".concat(t.t0.message),e.$message.error("加载规则失败: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[3,20,24,27]])})))()},clearCommandOutput:function(){this.commandOutput=""},checkScriptExistence:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n,s,a,o,c,i,u,l,d,p,v;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法检查脚本"),t.abrupt("return");case 3:t.prev=3,e.debugging=!0,e.debugInfo="正在检查脚本存在状态...\n",r=["ls -la /root/iPtato.sh","ls -la /root/iptato.sh",'find /root -name "*.sh" | grep -i iptato','find / -name "*.sh" -type f -not -path "*/\\.*" | grep -i iptato 2>/dev/null'],n=0,s=r;case 8:if(!(n<s.length)){t.next=30;break}return a=s[n],e.debugInfo+="\n执行命令: ".concat(a,"\n"),t.next=13,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:a});case 13:if(o=t.sent,!o||!o.success){t.next=26;break}if(u=(null===(c=o.data)||void 0===c?void 0:c.stdout)||"",l=(null===(i=o.data)||void 0===i?void 0:i.stderr)||"",e.debugInfo+="输出:\n".concat(u,"\n"),l&&(e.debugInfo+="错误:\n".concat(l,"\n")),!u||!u.includes("iPtato.sh")&&!u.includes("iptato.sh")){t.next=24;break}return e.debugInfo+="\n检测到脚本存在！但前端应用未能识别。\n",e.debugInfo+="这可能是脚本命名不一致或路径不同导致的问题。\n",e.$message.warning("脚本已存在但应用无法识别，请参考调试信息"),t.abrupt("break",30);case 24:t.next=27;break;case 26:e.debugInfo+="命令执行失败: ".concat((null===o||void 0===o?void 0:o.error)||"未知错误","\n");case 27:n++,t.next=8;break;case 30:return e.debugInfo+="\n尝试直接执行脚本...\n",t.next=33,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:'cd /root && (./iPtato.sh --help || ./iptato.sh --help || echo "无法执行脚本")'});case 33:d=t.sent,d&&d.success?(v=(null===(p=d.data)||void 0===p?void 0:p.stdout)||"",e.debugInfo+="执行脚本输出:\n".concat(v,"\n"),(v.includes("管理脚本")||v.includes("iptables"))&&(e.debugInfo+="\n脚本可以成功执行！\n",e.debugInfo+="建议使用手动初始化功能完成后续步骤。\n",e.$message.success("脚本可以成功执行，但需要手动初始化"))):e.debugInfo+="脚本执行失败: ".concat((null===d||void 0===d?void 0:d.error)||"未知错误","\n"),t.next=41;break;case 37:t.prev=37,t.t0=t["catch"](3),e.debugInfo+="\n检查过程出错: ".concat(t.t0.message,"\n"),e.$message.error("检查出错: ".concat(t.t0.message));case 41:return t.prev=41,e.debugging=!1,t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[3,37,41,44]])})))()},testServerConnection:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n,s,a,o,c,i;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法测试连接"),t.abrupt("return");case 3:return t.prev=3,e.debugging=!0,e.debugInfo="正在测试服务器连接...\n",e.debugInfo+="1. 检查服务器信息:\n",t.next=9,e.getServer(e.serverId);case 9:return r=t.sent,r&&r.success?(e.debugInfo+="服务器信息: ".concat(JSON.stringify(r.data,null,2),"\n"),e.debugInfo+="连接状态: ".concat(r.data.status,"\n")):e.debugInfo+="获取服务器信息失败: ".concat((null===r||void 0===r?void 0:r.error)||"未知错误","\n"),e.debugInfo+="\n尝试重新连接服务器...\n",t.prev=12,t.next=15,e.connectServer(e.serverId);case 15:n=t.sent,n&&n.success?e.debugInfo+="服务器重新连接成功\n":e.debugInfo+="服务器重新连接失败: ".concat((null===n||void 0===n?void 0:n.error)||"未知错误","\n"),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](12),e.debugInfo+="重新连接出错: ".concat(t.t0.message,"\n");case 22:return e.debugInfo+="\n2. 执行简单命令测试:\n",t.next=25,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:"uname -a && whoami && pwd"});case 25:return s=t.sent,s&&s.success?(e.debugInfo+="命令输出:\n".concat((null===(a=s.data)||void 0===a?void 0:a.stdout)||"","\n"),e.debugInfo+="命令成功执行，服务器连接正常\n"):(e.debugInfo+="命令执行失败: ".concat((null===s||void 0===s?void 0:s.error)||"未知错误","\n"),e.debugInfo+="服务器连接可能存在问题\n"),e.debugInfo+="\n3. 检查前后端连接配置:\n",o={NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL||window.location.origin,e.debugInfo+="API基础URL: ".concat(o,"\n"),e.debugInfo+="当前连接模式: ".concat("production","\n"),e.debugInfo+="\n4. 检查网络连接:\n",t.prev=32,t.next=35,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:"ping -c 3 8.8.8.8"});case 35:c=t.sent,c&&c.success?e.debugInfo+="ping测试结果:\n".concat((null===(i=c.data)||void 0===i?void 0:i.stdout)||"","\n"):e.debugInfo+="ping测试失败: ".concat((null===c||void 0===c?void 0:c.error)||"未知错误","\n"),t.next=42;break;case 39:t.prev=39,t.t1=t["catch"](32),e.debugInfo+="ping测试错误: ".concat(t.t1.message,"\n");case 42:e.$message.info("连接测试完成，请查看调试信息"),t.next=49;break;case 45:t.prev=45,t.t2=t["catch"](3),e.debugInfo+="\n测试过程出错: ".concat(t.t2.message,"\n"),e.$message.error("测试出错: ".concat(t.t2.message));case 49:return t.prev=49,e.debugging=!1,t.finish(49);case 52:case"end":return t.stop()}}),t,null,[[3,45,49,52],[12,19],[32,39]])})))()},resetConnectionState:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法重置状态"),t.abrupt("return");case 3:return t.prev=3,e.debugging=!0,e.debugInfo="正在重置连接状态...\n",t.prev=6,e.debugInfo+="尝试断开当前连接...\n",t.next=10,e.$store.dispatch("servers/executeCommand",{serverId:e.serverId,command:'echo "测试连接状态重置"'});case 10:r=t.sent,e.debugInfo+="断开连接测试命令执行结果: "+(null!==r&&void 0!==r&&r.success?"成功":"失败")+"\n",t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](6),e.debugInfo+="断开连接测试出错: ".concat(t.t0.message,"\n");case 17:return e.debugInfo+="尝试重新连接服务器...\n",t.prev=18,t.next=21,e.connectServer(e.serverId);case 21:n=t.sent,n&&n.success?e.debugInfo+="服务器重新连接成功\n":e.debugInfo+="服务器重新连接失败: ".concat((null===n||void 0===n?void 0:n.error)||"未知错误","\n"),t.next=28;break;case 25:t.prev=25,t.t1=t["catch"](18),e.debugInfo+="重新连接出错: ".concat(t.t1.message,"\n");case 28:return e.resetInitSteps(),e.isInitialized=!1,e.initStepActive=0,t.next=33,e.checkInitialization();case 33:e.debugInfo+="初始化状态已重置，并重新检查\n",e.$message.success("连接状态已重置"),t.next=41;break;case 37:t.prev=37,t.t2=t["catch"](3),e.debugInfo+="\n重置过程出错: ".concat(t.t2.message,"\n"),e.$message.error("重置出错: ".concat(t.t2.message));case 41:return t.prev=41,e.debugging=!1,t.finish(41);case 44:case"end":return t.stop()}}),t,null,[[3,37,41,44],[6,14],[18,25]])})))()},manualInitialize:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法初始化"),t.abrupt("return");case 3:return t.prev=3,e.loading=!0,e.commandOutput="正在手动初始化...\n",e.initializationSteps.forEach((function(e){return e.done=!0})),e.isInitialized=!0,t.next=10,e.refreshBlockList();case 10:return t.next=12,e.refreshSSHPort();case 12:return t.next=14,e.refreshInboundPorts();case 14:return t.next=16,e.refreshInboundIPs();case 16:e.commandOutput+="手动初始化完成，已跳过脚本检查\n",e.$message.success("手动初始化完成"),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](3),e.commandOutput+="\n手动初始化失败: ".concat(t.t0.message,"\n"),e.$message.error("初始化失败: ".concat(t.t0.message));case 24:return t.prev=24,e.loading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[3,20,24,27]])})))()},generateManualCommands:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法生成命令"),t.abrupt("return");case 3:try{e.debugging=!0,e.debugInfo="以下是您可以直接在服务器上执行的命令：\n\n",e.debugInfo+="## 1. 部署iPtato脚本\n",e.debugInfo+="```\n",e.debugInfo+="cd ~ && wget -N --no-check-certificate https://raw.githubusercontent.com/Fiftonb/GiPtato/refs/heads/main/iPtato.sh && chmod +x iPtato.sh\n",e.debugInfo+="```\n\n",e.debugInfo+="## 2. 测试iPtato脚本\n",e.debugInfo+="```\n",e.debugInfo+="./iPtato.sh\n",e.debugInfo+="```\n\n",e.debugInfo+="## 3. 常用操作命令\n",e.debugInfo+="```\n",e.debugInfo+="# 阻止BT/PT流量\n",e.debugInfo+="./iPtato.sh 1\n\n",e.debugInfo+="# 解封BT/PT流量\n",e.debugInfo+="./iPtato.sh 11\n\n",e.debugInfo+="# 查看当前封禁列表\n",e.debugInfo+="./iPtato.sh 101\n",e.debugInfo+="```\n\n",e.debugInfo+="## 使用方法\n",e.debugInfo+="1. 通过SSH工具连接到您的服务器\n",e.debugInfo+="2. 复制并粘贴上述命令到SSH终端执行\n",e.debugInfo+='3. 执行完成后，返回此界面点击"跳过检查直接初始化"按钮\n\n',e.debugInfo+='如果您成功执行了这些命令，请点击页面上的"跳过检查直接初始化"按钮，这样可以绕过自动部署和检查过程，直接使用界面管理规则。\n',e.$message.success("已生成手动执行命令，请查看调试信息")}catch(r){e.debugInfo+="\n生成命令过程出错: ".concat(r.message,"\n"),e.$message.error("生成命令出错: ".concat(r.message))}finally{e.debugging=!1}case 4:case"end":return t.stop()}}),t)})))()},deployIptatoScript:function(){var e=this;return(0,I.A)((0,A.A)().mark((function t(){var r,n;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasValidServerId){t.next=3;break}return e.$message.error("未指定服务器ID，无法执行部署操作"),t.abrupt("return");case 3:return t.prev=3,e.deploying=!0,e.commandOutput="正在部署脚本...\n",t.next=8,e.deployIptato(e.serverId);case 8:r=t.sent,r&&r.success?(e.$message.success("脚本部署成功"),e.commandOutput+="\n脚本部署成功"):(n=(null===r||void 0===r?void 0:r.error)||"脚本部署失败",e.$message.error("脚本部署失败: ".concat(n)),e.commandOutput+="\n脚本部署失败: ".concat(n)),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.$message.error("脚本部署错误: ".concat(t.t0.message)),e.commandOutput+="\n脚本部署错误: ".concat(t.t0.message);case 16:return t.prev=16,e.deploying=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[3,12,16,19]])})))()},isSshPort:function(e){if(this.sshPort&&this.sshPort===parseInt(e,10))return!0;if(this.server&&this.server.port===parseInt(e,10))return!0;var t=[22,2222];return t.includes(parseInt(e,10))},startServerStatusCheck:function(){var e=this;this.statusCheckTimer=setInterval((0,I.A)((0,A.A)().mark((function t(){var r,n,s;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasValidServerId){t.next=11;break}return t.prev=1,t.next=4,e.getServer(e.serverId);case 4:r=t.sent,r&&r.success&&(n=r.data.status,s=e.server?e.server.status:null,e.server=r.data,"online"!==s&&"online"===n&&e.$message.success("服务器已恢复在线状态"),"online"===s&&"online"!==n&&e.$message.warning("服务器已离线，无法管理防火墙规则")),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.error("检查服务器状态出错:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),3e4)},stopServerStatusCheck:function(){this.statusCheckTimer&&(clearInterval(this.statusCheckTimer),this.statusCheckTimer=null)}})},U=M;var F=(0,l.A)(U,V,K,!1,null,"74758def",null);const R=F.exports;n["default"].use(v.Ay);var N=[{path:"/",name:"home",component:w},{path:"/servers",name:"servers",component:B},{path:"/rules/:serverId",name:"rules",component:R,props:!0}],j=new v.Ay({mode:"history",base:"/",routes:N});const q=j;r(50113),r(20116);var G=r(42332),J=r.n(G),Q="/api/servers",W={servers:[],loading:!1,error:null},X={getAllServers:function(e){return e.servers},getServerById:function(e){return function(t){return e.servers.find((function(e){return e._id===t}))}},getLoading:function(e){return e.loading},getError:function(e){return e.error}},Y={getAllServers:function(e){return(0,I.A)((0,A.A)().mark((function t(){var r,n;return(0,A.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,r("setLoading",!0),r("setError",null),t.prev=3,t.next=6,J().get(Q);case 6:return n=t.sent,r("setServers",n.data.data),t.abrupt("return",n.data);case 11:throw t.prev=11,t.t0=t["catch"](3),r("setError",t.t0.response?t.t0.response.data.message:t.t0.message),t.t0;case 15:return t.prev=15,r("setLoading",!1),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},getServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().get("".concat(Q,"/").concat(t));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},createServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=e.dispatch,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post(Q,t);case 6:return a=r.sent,r.next=9,s("getAllServers");case 9:return r.abrupt("return",a.data);case 12:throw r.prev=12,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 16:return r.prev=16,n("setLoading",!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,12,16,19]])})))()},updateServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o,c;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=e.dispatch,a=t.id,o=t.data,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().put("".concat(Q,"/").concat(a),o);case 7:return c=r.sent,r.next=10,s("getAllServers");case 10:return r.abrupt("return",c.data);case 13:throw r.prev=13,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 17:return r.prev=17,n("setLoading",!1),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[4,13,17,20]])})))()},deleteServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=e.dispatch,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J()["delete"]("".concat(Q,"/").concat(t));case 6:return a=r.sent,r.next=9,s("getAllServers");case 9:return r.abrupt("return",a.data);case 12:throw r.prev=12,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 16:return r.prev=16,n("setLoading",!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,12,16,19]])})))()},connectServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=e.dispatch,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(Q,"/").concat(t,"/connect"));case 6:return a=r.sent,r.next=9,s("getAllServers");case 9:return r.abrupt("return",a.data);case 12:throw r.prev=12,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 16:return r.prev=16,n("setLoading",!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,12,16,19]])})))()},disconnectServer:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=e.dispatch,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(Q,"/").concat(t,"/disconnect"));case 6:return a=r.sent,r.next=9,s("getAllServers");case 9:return r.abrupt("return",a.data);case 12:throw r.prev=12,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 16:return r.prev=16,n("setLoading",!1),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[3,12,16,19]])})))()},executeCommand:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.command,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(Q,"/").concat(s,"/execute"),{command:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},deployIptato:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,e.dispatch,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(Q,"/").concat(t,"/deploy"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()}},Z={setServers:function(e,t){e.servers=t},setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t}};const ee={namespaced:!0,state:W,getters:X,actions:Y,mutations:Z};var te="/api/rules",re={loading:!1,error:null},ne={getLoading:function(e){return e.loading},getError:function(e){return e.error}},se={getBlockList:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().get("".concat(te,"/").concat(t,"/blocklist"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},blockBTPTAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/block/bt-pt"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},blockSPAMAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/block/spam"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},blockAllAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/block/all"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},blockCustomPortsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ports,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/block/ports"),{ports:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},blockCustomKeywordAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.keyword,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/block/keyword"),{keyword:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},unblockBTPTAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/unblock/bt-pt"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},unblockSPAMAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/unblock/spam"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},unblockAllAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/unblock/all"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},unblockCustomPortsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ports,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/unblock/ports"),{ports:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},unblockCustomKeywordAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.keyword,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/unblock/keyword"),{keyword:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},unblockAllKeywordsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/unblock/all-keywords"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},getInboundPorts:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().get("".concat(te,"/").concat(t,"/inbound/ports"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},getInboundIPs:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().get("".concat(te,"/").concat(t,"/inbound/ips"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},allowInboundPortsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ports,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/inbound/allow/ports"),{ports:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},disallowInboundPortsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ports,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/inbound/disallow/ports"),{ports:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},allowInboundIPsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ips,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/inbound/allow/ips"),{ips:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},disallowInboundIPsAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s,a,o;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,s=t.serverId,a=t.ips,n("setLoading",!0),n("setError",null),r.prev=4,r.next=7,J().post("".concat(te,"/").concat(s,"/inbound/disallow/ips"),{ips:a});case 7:return o=r.sent,r.abrupt("return",o.data);case 11:throw r.prev=11,r.t0=r["catch"](4),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 15:return r.prev=15,n("setLoading",!1),r.finish(15);case 18:case"end":return r.stop()}}),r,null,[[4,11,15,18]])})))()},getSSHPort:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().get("".concat(te,"/").concat(t,"/ssh-port"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()},clearAllRulesAction:function(e,t){return(0,I.A)((0,A.A)().mark((function r(){var n,s;return(0,A.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,n("setLoading",!0),n("setError",null),r.prev=3,r.next=6,J().post("".concat(te,"/").concat(t,"/clear-all"));case 6:return s=r.sent,r.abrupt("return",s.data);case 10:throw r.prev=10,r.t0=r["catch"](3),n("setError",r.t0.response?r.t0.response.data.message:r.t0.message),r.t0;case 14:return r.prev=14,n("setLoading",!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[3,10,14,17]])})))()}},ae={setLoading:function(e,t){e.loading=t},setError:function(e,t){e.error=t}};const oe={namespaced:!0,state:re,getters:ne,actions:se,mutations:ae};n["default"].use(T.Ay);const ce=new T.Ay.Store({modules:{servers:ee,rules:oe}});n["default"].use(a()),n["default"].config.productionTip=!1,new n["default"]({router:q,store:ce,render:function(e){return e(p)}}).$mount("#app")}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,(()=>{r.amdO={}})(),(()=>{var e=[];r.O=(t,n,s,a)=>{if(!n){var o=1/0;for(l=0;l<e.length;l++){for(var[n,s,a]=e[l],c=!0,i=0;i<n.length;i++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[i])))?n.splice(i--,1):(c=!1,a<o&&(o=a));if(c){e.splice(l--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[n,s,a]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{var e={524:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,a,[o,c,i]=n,u=0;if(o.some((t=>0!==e[t]))){for(s in c)r.o(c,s)&&(r.m[s]=c[s]);if(i)var l=i(r)}for(t&&t(n);u<o.length;u++)a=o[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(l)},n=self["webpackChunkiptato_panel_client"]=self["webpackChunkiptato_panel_client"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[504],(()=>r(63801)));n=r.O(n)})();
//# sourceMappingURL=app.d7a58a6d.js.map